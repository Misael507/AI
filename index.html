<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma Biomédica IA Moderna</title>
  <!-- Fuentes y Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Enlace a style.css -->
  <link rel="stylesheet" href="style.css">
</head>
<body class="">
  <div class="main-container"> <!-- Siempre columna -->

    <!-- Wrapper para Chat y Mantenimiento Específico (Fila en pantallas grandes) -->
    <div class="main-content-wrapper">

      <!-- Columna del Chat -->
      <div class="chat-column">
        <div class="chat-container card-base">
          <button id="dark-mode-toggle" aria-label="Cambiar modo de color"><i class="fas fa-moon"></i></button>
          <h1 id="chat-header"><i class="fas fa-stethoscope"></i> Asistente Biomédico IA</h1>
          <p class="header-subtitle">Ingeniería Biomédica, Mantenimiento Predictivo, Preventivo y Correctivo, Tips y Más.</p>
          <div id="chat-messages">
            <!-- Mensajes del chat se añadirán aquí -->
          </div>
           <div id="ai-controls">
            <div class="control-group">
              <label>Tono:</label>
              <button class="control-button active" data-tone="neutral" id="tone-neutral"><i class="fas fa-comment-dots"></i> Neutro</button>
              <button class="control-button" data-tone="formal" id="tone-formal"><i class="fas fa-user-tie"></i> Formal</button>
              <button class="control-button" data-tone="conciso" id="tone-conciso"><i class="fas fa-compress-arrows-alt"></i> Conciso</button>
            </div>
             <div class="control-group">
              <label >Longitud:</label>
              <button class="control-button" data-length="corta" id="length-corta"><i class="fas fa-align-left"></i> Corta</button>
              <button class="control-button active" data-length="media" id="length-media"><i class="fas fa-align-justify"></i> Media</button>
              <button class="control-button" data-length="larga" id="length-larga"><i class="fas fa-align-right"></i> Larga</button>
            </div>
             <div class="control-group">
              <button class="control-button" id="toggle-web-search-button" title="Simular búsqueda web (modifica el prompt)"><i class="fas fa-globe"></i> Búsqueda Web</button>
            </div>
             <div class="control-group">
              <button class="control-button" id="regenerate-button" title="Regenerar última respuesta" disabled><i class="fas fa-sync-alt"></i> Regenerar</button>
            </div>
          </div>
          <div class="input-area">
            <div id="loading"><i class="fas fa-spinner"></i> Procesando...</div>
            <div id="error-message" class="error-message"></div> <!-- Error General Chat -->
            <div id="file-upload-container">
              <button id="uploadButton" aria-label="Subir documentos"><i class="fas fa-upload"></i> Subir Documentos (.txt)</button>
              <input type="file" id="fileInput" accept=".txt" multiple />
              <ul id="file-list"></ul>
            </div>
            <div class="input-container">
              <textarea id="questionInput" rows="1" placeholder="Haz una pregunta general o sube un documento..."></textarea>
              <button id="sendButton" aria-label="Enviar pregunta"><i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </div>
      </div> <!-- Fin Columna Chat -->

      <!-- Columna MANTENIMIENTO ESPECÍFICO -->
      <div class="equipment-column">
        <div id="equipment-section" class="card-base">
          <h2><i class="fas fa-tools"></i> Mantenimiento Específico</h2>

          <div class="equipment-input-group">
            <label for="equipmentName"><i class="fas fa-tag"></i> Nombre del Equipo</label>
            <input type="text" id="equipmentName" placeholder="Ej: Monitor de Signos Vitales">
          </div>
          <div class="equipment-input-group">
            <label for="equipmentBrand"><i class="fas fa-copyright"></i> Marca</label>
            <input type="text" id="equipmentBrand" placeholder="Ej: Philips">
          </div>
          <div class="equipment-input-group">
            <label for="equipmentModel"><i class="fas fa-barcode"></i> Modelo</label>
            <input type="text" id="equipmentModel" placeholder="Ej: IntelliVue MX700">
          </div>

          <div id="maintenance-type-selector">
            <p><i class="fas fa-tasks"></i> Selecciona el Tipo de Mantenimiento:</p>
            <div class="maintenance-buttons">
              <button class="maintenance-button" data-type="predictivo">
                <i class="fas fa-bolt"></i> Predictivo
              </button>
              <button class="maintenance-button" data-type="preventivo">
                <i class="fas fa-calendar-check"></i> Preventivo
              </button>
              <button class="maintenance-button" data-type="correctivo">
                <i class="fas fa-wrench"></i> Correctivo
              </button>
            </div>
          </div>

          <div id="equipment-question-area">
            <textarea id="equipmentQuestionInput" rows="3" placeholder="Completa los datos del equipo y selecciona un tipo..." disabled></textarea>
            <button id="sendEquipmentQuestionButton" disabled>
              <i class="fas fa-paper-plane"></i> Obtener Info Específica
            </button>
          </div>

          <div id="equipmentLoading"><i class="fas fa-spinner"></i> Buscando información...</div>
          <div id="equipmentError" class="error-message"></div> <!-- Error Específico Equipo -->
          <div id="equipmentResponseDisplay">
            <!-- Respuesta específica se mostrará aquí -->
          </div>
        </div>
      </div> <!-- Fin Columna Mantenimiento Específico -->

    </div> <!-- Fin del main-content-wrapper (Chat + Equipo) -->

    <!-- Columna de Tips (Ahora fuera del wrapper, aparecerá debajo) -->
    <div class="tips-column">
      <div id="maintenance-tips-section" class="card-base">
        <h2><i class="fas fa-lightbulb"></i> Tips de Mantenimiento</h2>
        <div id="maintenance-tips-content">
          <div id="maintenance-tips-loading" style="display: none;"><i class="fas fa-spinner"></i> Cargando tip...</div>
          <div id="maintenance-tips-error" class="error-message"></div> <!-- Error Específico Tips -->
          <!-- Tip se mostrará aquí -->
        </div>
        <button id="regenerate-tip-button" disabled>
          <i class="fas fa-sync-alt"></i> Regenerar Tip
        </button>
      </div>
    </div> <!-- Fin Columna Tips -->

  </div> <!-- Fin del main-container -->
  <!-- Enlace a script.js -->
  <script src="script.js"></script>
</body>
</html>
