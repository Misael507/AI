<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma Biomédica IA Moderna</title>
  <!-- Fuentes y Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Enlace a style.css -->
  <link rel="stylesheet" href="style.css">
</head>
<body class="">
  <div class="main-container"> <!-- Siempre columna -->

    <!-- Wrapper para Chat y Mantenimiento Específico (Fila en pantallas grandes) -->
    <div class="main-content-wrapper">

      <!-- Columna del Chat -->
      <div class="chat-column">
        <div class="chat-container card-base">
          <button id="dark-mode-toggle" aria-label="Cambiar modo de color"><i class="fas fa-moon"></i></button>
          <h1 id="chat-header"><i class="fas fa-stethoscope"></i>BIAmedical Assistant</h1>
          <p class="header-subtitle">Ingeniería Biomédica en Panamá, Mantenimiento Predictivo, Preventivo y Correctivo, Tips y Más.</p>
          <button id="clear-chat-button" class="control-button clear-button" title="Limpiar chat e iniciar nuevo"><i class="fas fa-eraser"></i> Nuevo Chat</button>
          <div id="chat-messages">
            <!-- Mensajes del chat se añadirán aquí -->
          </div>
          <div class="input-area">
            <div id="loading"><i class="fas fa-spinner"></i> Procesando...</div>
            <div id="error-message" class="error-message"></div> <!-- Error General Chat -->
            <div id="file-upload-container">
              <button id="uploadButton" aria-label="Subir documentos" title="Sube hasta 5 archivos (máx. 10MB cada uno). Tipos soportados: .txt, .pdf, .docx, .csv, .json, .xml">
                <i class="fas fa-upload"></i> Subir Documentos
              </button>
              <input type="file" id="fileInput" accept=".txt,.pdf,.docx,.csv,.json,.xml" multiple />
              <ul id="file-list"></ul>
            </div>
            <div class="input-container">
              <div class="chat-controls-wrapper">
                <div class="chat-controls">
                  <button class="control-button" data-tone="neutral" id="tone-neutral" title="Tono Neutro"><i class="fas fa-comment-dots"></i></button>
                  <button class="control-button" data-tone="formal" id="tone-formal" title="Tono Formal"><i class="fas fa-user-tie"></i></button>
                  <button class="control-button" data-tone="conciso" id="tone-conciso" title="Tono Conciso"><i class="fas fa-compress-arrows-alt"></i></button>
                  <button class="control-button" data-length="corta" id="length-corta" title="Respuesta Corta"><i class="fas fa-align-left"></i></button>
                  <button class="control-button" data-length="media" id="length-media" title="Respuesta Media"><i class="fas fa-align-justify"></i></button>
                  <button class="control-button" data-length="larga" id="length-larga" title="Respuesta Larga"><i class="fas fa-align-right"></i></button>
                  <button class="control-button" id="toggle-web-search-button" title="Simular búsqueda web"><i class="fas fa-globe"></i></button>
                  <button class="control-button" id="regenerate-button" title="Regenerar última respuesta" disabled><i class="fas fa-sync-alt"></i></button>
                </div>
              </div>
              <textarea id="questionInput" rows="1" placeholder="Haz una pregunta o sube un documento..."></textarea>
              <button id="sendButton" aria-label="Enviar pregunta"><i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </div>
      </div> <!-- Fin Columna Chat -->

    </div> <!-- Fin del main-content-wrapper (Ahora solo Chat) -->

    <!-- Columna MANTENIMIENTO ESPECÍFICO (Ahora fuera del wrapper, aparecerá debajo) -->
    <div class="equipment-column">
      <div id="equipment-section" class="card-base">
        <h2><i class="fas fa-tools"></i> Mantenimiento Específico</h2>

        <div class="equipment-input-group">
            <label for="equipmentName"><i class="fas fa-tag"></i> Nombre del Equipo</label>
            <input type="text" id="equipmentName" placeholder="Ej: Monitor de Signos Vitales">
          </div>
          <div class="equipment-input-group">
            <label for="equipmentBrand"><i class="fas fa-copyright"></i> Marca</label>
            <input type="text" id="equipmentBrand" placeholder="Ej: Philips">
          </div>
          <div class="equipment-input-group">
            <label for="equipmentModel"><i class="fas fa-barcode"></i> Modelo</label>
            <input type="text" id="equipmentModel" placeholder="Ej: IntelliVue MX700">
          </div>

          <div id="maintenance-type-selector">
            <p><i class="fas fa-tasks"></i> Selecciona el Tipo de Mantenimiento:</p>
            <div class="maintenance-buttons">
              <button class="maintenance-button" data-type="predictivo">
                <i class="fas fa-bolt"></i> Predictivo
              </button>
              <button class="maintenance-button" data-type="preventivo">
                <i class="fas fa-calendar-check"></i> Preventivo
              </button>
              <button class="maintenance-button" data-type="correctivo">
                <i class="fas fa-wrench"></i> Correctivo
              </button>
            </div>
          </div>

          <!-- NUEVO: File Upload para Mantenimiento Específico -->
          <div id="eq-file-upload-container" class="file-upload-container"> <!-- Reutilizar clase -->
            <button id="eq-uploadButton" aria-label="Subir documentos (Equipo)" title="Sube archivos relevantes para la consulta del equipo (mismos límites y tipos)">
              <i class="fas fa-upload"></i> Subir Documentos (Equipo)
            </button>
            <input type="file" id="eq-fileInput" accept=".txt,.pdf,.docx,.csv,.json,.xml" multiple style="display: none;" /> <!-- Hide the default input -->
            <ul id="eq-file-list"></ul> <!-- Lista específica para equipo -->
          </div>
          <!-- MOVED File Upload inside equipment-question-area -->

          <div id="equipment-question-area">
            <!-- MOVED Controls inside equipment-question-area -->
            <div class="equipment-controls-wrapper">
               <div class="chat-controls equipment-controls"> <!-- Reutilizar clase chat-controls para estilo base -->
                 <button class="control-button" data-tone="neutral" id="eq-tone-neutral" title="Tono Neutro"><i class="fas fa-comment-dots"></i></button>
                 <button class="control-button" data-tone="formal" id="eq-tone-formal" title="Tono Formal"><i class="fas fa-user-tie"></i></button>
               <button class="control-button" data-tone="conciso" id="eq-tone-conciso" title="Tono Conciso"><i class="fas fa-compress-arrows-alt"></i></button>
               <button class="control-button" data-length="corta" id="eq-length-corta" title="Respuesta Corta"><i class="fas fa-align-left"></i></button>
               <button class="control-button" data-length="media" id="eq-length-media" title="Respuesta Media"><i class="fas fa-align-justify"></i></button>
               <button class="control-button" data-length="larga" id="eq-length-larga" title="Respuesta Larga"><i class="fas fa-align-right"></i></button>
               <!-- Web search y Regenerate específicos para esta sección -->
               <button class="control-button" id="eq-toggle-web-search-button" title="Simular búsqueda web (Equipo)"><i class="fas fa-globe"></i></button>
                 <button class="control-button" id="eq-regenerate-button" title="Regenerar Info Específica" disabled><i class="fas fa-sync-alt"></i></button>
               </div>
            </div>
            <!-- Wrap textarea and button -->
            <div class="equipment-input-container"> <!-- NEW: Similar to .input-container -->
              <textarea id="equipmentQuestionInput" rows="3" placeholder="Completa los datos del equipo y selecciona un tipo..." disabled></textarea>
              <button id="sendEquipmentQuestionButton" disabled>
                <i class="fas fa-paper-plane"></i> Obtener Info Específica
              </button>
            </div>
          </div>

          <div id="equipmentLoading"><i class="fas fa-spinner"></i> Buscando información...</div>
          <div id="equipmentError" class="error-message"></div> <!-- Error Específico Equipo -->
          <div id="equipmentResponseDisplay">
            <!-- Respuesta específica se mostrará aquí -->
          </div>
        </div>
      </div> <!-- Fin Columna Mantenimiento Específico -->

    <!-- Columna de Tips (Ya estaba fuera del wrapper) -->
    <div class="tips-column">
      <div id="maintenance-tips-section" class="card-base">
        <h2><i class="fas fa-lightbulb"></i> Tips de Mantenimiento</h2>
        <div id="maintenance-tips-content">
          <div id="maintenance-tips-loading" style="display: none;"><i class="fas fa-spinner"></i> Cargando tip...</div>
          <div id="maintenance-tips-error" class="error-message"></div> <!-- Error Específico Tips -->
          <!-- Tip se mostrará aquí -->
        </div>
        <button id="regenerate-tip-button" disabled>
          <i class="fas fa-sync-alt"></i> Regenerar Tip
        </button>
      </div>
    </div> <!-- Fin Columna Tips -->

  </div> <!-- Fin del main-container -->
  <!-- Enlace a script.js -->
  <script src="script.js"></script>
</body>
</html>
